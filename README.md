# gitter-listener [![NPM version](https://img.shields.io/npm/v/gitter-listener.svg?style=flat)](https://www.npmjs.com/package/gitter-listener) [![NPM downloads](https://img.shields.io/npm/dm/gitter-listener.svg?style=flat)](https://npmjs.org/package/gitter-listener) [![Build Status](https://img.shields.io/travis/sellside/gitter-listener.svg?style=flat)](https://travis-ci.org/sellside/gitter-listener)

Listen for gitter room events and messages.

## Table of Contents

- [Install](#install)
- [Usage](#usage)
- [API](#api)
- [Events](#events)
  * [chatMessages](#chatmessages)
  * [events](#events)
  * [users](#users)
- [About](#about)
  * [Related projects](#related-projects)
  * [Contributing](#contributing)
  * [Building docs](#building-docs)
  * [Running tests](#running-tests)
  * [Author](#author)
  * [License](#license)

_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install --save gitter-listener
```

## Usage

```js
var Gitter = require('gitter-listener');
```

## API

### [Client](index.js#L23)

Creates a client that listens for gitter events.

**Params**

* `token` **{String}**: Gitter token from [the gitter developer apps page](https://developer.gitter.im/apps).
* `options` **{Object}**: Additional options to pass along to [node-gitter]

**Example**

```js
var gitter = Gitter(process.env.GITTER_TOKEN);
```

### [.listen](index.js#L49)

Tell the client to start listening for gitter events. Setup any event listeners for the events before starting the client.

**Params**

* `rooms` **{Array}**: Optional array of rooms to listen to. If empty, the client will use all the rooms the gitter user has previously joined. The gitter user is the user associated with the token used above.
* `returns` **{Promise}**: Returns a promise that will resolve to a boolean when the client has finished setting up listeners.

**Example**

```js
gitter.on('chatMessages', console.log);
gitter.on('users', console.log);
gitter.on('events', console.log);

gitter.listen();
```

## Events

The following events will be emitted after [.listen](#listen) has been called and are available to be listened for:

### chatMessages

The `chatMessages` event will be emitted when anything happens to a chat message.
Check the `.operation` property to see what is happening to the message:

```js
gitter.on('chatMessages', function(msg, room) {
  console.log(msg);
  switch (msg.operation) {
    case 'create':
      // new message being created
      break;
    case 'patch':
      // message was updated (e.g. someone marked it as "read")
      break;
  }
});
```

### events

The `events` event will be emitted when an event in the room occurs.

```js
gitter.on('events', function(event, room) {
  console.log(event);
});
```

### users

The `users` event will be emitted when a user joins or leaves a room:

```js
gitter.on('users', function(user, room) {
  console.log(user);
});
```

## About

### Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](../../issues/new).

Please read the [contributing guide](contributing.md) for avice on opening issues, pull requests, and coding standards.

### Building docs

_(This document was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme) (a [verb](https://github.com/verbose/verb) generator), please don't edit the readme directly. Any changes to the readme must be made in [.verb.md](.verb.md).)_

To generate the readme and API documentation with [verb](https://github.com/verbose/verb):

```sh
$ npm install -g verb verb-generate-readme && verb
```

### Running tests

Install dev dependencies:

```sh
$ npm install -d && npm test
```

### Author

**Brian Woodward**

* [github/doowb](https://github.com/doowb)
* [twitter/doowb](http://twitter.com/doowb)

### License

Copyright Â© 2016, [Brian Woodward](https://github.com/doowb).
Released under the [MIT license](https://github.com/sellside/gitter-listener/blob/master/LICENSE).

***

_This file was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme), v0.1.30, on August 22, 2016._